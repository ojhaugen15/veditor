<html><head></head><body><script id='veditorojhaugen'>
//veditor
 
character_width = 12.1
font_size = 20
font_color = 'white'
font_style = 'Courier'
editor_background = 'black'
body_padding = 10
breathing_room = 10
storage_name = 'veditorcontent'
app_name = 'veditor'
cursor_opacity = '0.7'
space_code = '&nbsp;'
left_bracket = '&lt;'
right_bracket = '&gt;'
and_symbol = '&amp;'
cursor_padding = 7
interior_program = 'programojhaugen'
nonline_elements = 3
header_height = 20
header_margin = 10
header_displacement = addNumbers(header_height, header_margin)
m_jump = 30
n_jump = quotientNumbers(m_jump, 2)
body_node = getValue(document, 'body')
body_style = getValue(body_node, 'style')
cursor_element = document.createElement('div')
cursor_style = getValue(cursor_element, 'style')

command_mode = true
visual_mode = false
current_x = 0
current_y = 0
previous_state = ''
state_undone = null
search_term = ''
search_mode = false
selection_start = 0
selection_start = 0
copied_text = ''

setValue(body_style, 'background', editor_background)
setValue(body_style, 'color', font_color)
setValue(body_style, 'fontSize', font_size)
setValue(body_style, 'fontFamily', font_style)
setValue(body_style, 'fontWeight', 'bold')
body_node.appendChild(cursor_element)

setValue(cursor_style, 'height', font_size)
setValue(cursor_style, 'width', character_width)
setValue(cursor_style, 'background', 'purple')
setValue(cursor_style, 'opacity', cursor_opacity)
setValue(cursor_style, 'position', 'absolute')

header_1 = "Click <a id='click_1' style='text-decoration: underline; cursor: pointer;'>here</a> to download/save runnable HTML file"
header_2 = " and click <a id='click_2' style='text-decoration: underline; cursor: pointer;'>here</a> for this primeval-Vim text-editor's commands "
header_3 = "(or view their code at my GitHub). "
header_4 = '<a target="_blank" href="https://github.com/ojhaugen15">Conceived, designed, coded, & maintained by OJ Haugen</a>'

descriptions_0 = ""
descriptions_1 = "i - character insertion mode"
descriptions_2 = "Escape - restore command mode"
descriptions_3 = "h - left"
descriptions_4 = "l - right"
descriptions_5 = "j - up"
descriptions_6 = "k - down"
descriptions_7 = "g - top"
descriptions_8 = "t - bottom"
descriptions_9 = "s - save to 'localStorage'"
descriptions_10 = "z - restore from 'localStorage'"
descriptions_11 = ""
descriptions_12 = "m - large scroll"
descriptions_13 = "n - half scroll"
descriptions_14 = "o - backward large scroll"
descriptions_15 = "d - cursor delete"
descriptions_16 = "q - delete line"
descriptions_17 = "w - end of previous 'word'"
descriptions_18 = "e - end of 'word'"
descriptions_19 = "b - beginning of 'word'"
descriptions_20 = "p - paste"
descriptions_21 = "v - copy mode"
descriptions_22 = "c - copy"
descriptions_23 = "x - cut"
//descriptions_29 = "f - go to function declaration (java-script)"
descriptions_26 = "u - undo (once)"
descriptions_27 = "r - redo"
//descriptions_30 = ": - search mode"
//descriptions_28 = "; - run text as program"
descriptions_24 = "a - end of line"
descriptions_25 = "y - beginning of line"

setCursor()
current_line = addLine()
body_node.addEventListener('keydown', executeAction)
body_node.addEventListener('keyup', secondaryAction)
createHeader()
setDownloaded()

function setDownloaded () {
 var downloadedStorage = document.getElementById(app_name)
 if (downloadedStorage) {
  var savedText = getValue(downloadedStorage, 'content')
  clearContent()
  setContent(savedText, 0)
 }
}

function createHeader () {
 var headerElement = document.createElement('div')
 body_node.prepend(headerElement)
 var headerStyle = getValue(headerElement, 'style')
 setValue(headerStyle, 'background', 'lightgray')
 setValue(headerStyle, 'color', 'purple')
 setValue(headerStyle, 'width', '1500px')
 setValue(headerStyle, 'fontSize', '10px')
 setValue(headerStyle, 'padding', '5px')
 setValue(headerStyle, 'marginBottom', concatenateStrings(header_margin, 'px'))
 headerElement.innerHTML = concatenateStrings(concatenateStrings(header_1, header_2), concatenateStrings(header_3, header_4))
 headerElement.addEventListener('click', function (clickEvent) {
  var targetElement = getValue(clickEvent, 'target')
  var targetType =  getValue(targetElement, 'tagName')
  if (areSame(targetType, 'A')) {
   var targetID = getValue(targetElement, 'id')
   if (areSame(targetID, 'click_1')) {
    var editorText = getContent()
    var veditorProgram = getValue(document.getElementById(storage_name), 'outerHTML')
    var veditorTop = concatenateStrings(concatenateStrings('<html><head><meta id="veditor" content="', editorText), '"></head><body>')
    var veditorHTML = concatenateStrings(concatenateStrings(veditorTop, veditorProgram), '</body></html')
    downloadFile(veditorHTML, 'index.html', 'html')
    return
   }
   if (areSame(targetID, 'click_2')) {
    setContent(concatenateDescriptions(), 0)
   }
  }
 })
}

function downloadFile (fileData, fileName, fileType) {
 var fileElement = new Blob([ fileData ], { type: fileType })
 if (window.navigator.msSaveOrOpenBlob) { // IE10+
  window.navigator.msSaveOrOpenBlob(file, filename)
  return
 }
 var anchorElement = document.createElement("a")
 var fileURL = URL.createObjectURL(fileElement)
 setValue(anchorElement, 'href', fileURL)
 setValue(anchorElement, 'download', fileName)
 body_node.appendChild(anchorElement)
 anchorElement.click()
 setTimeout(function() {
  body_node.removeChild(anchorElement)
  window.URL.revokeObjectURL(fileURL)
 }, 0)
}

function concatenateDescriptions () {
 var currentLine = descriptions_0
 var outputString = ''
 var nextNumber = 1
 while (arentSame(currentLine, undefined)) {
  outputString = concatenateStrings(outputString, currentLine)
  outputString = concatenateStrings(outputString, '\n')
  currentLine = getValue(window, concatenateStrings('descriptions_', toString(nextNumber)))
  nextNumber = addNumbers(nextNumber, 1)
 }
 return outputString
}

function addLine (addAfter, addBefore) {
 new_line = document.createElement('div')
 setValue(new_line, 'textContent')
 line_style = getValue(new_line, 'style')
 setValue(line_style, 'width', '100%')
 setValue(line_style, 'height', font_size)
 setValue(new_line, 'className', 'veditor-line')
 setValue(line_style, 'whiteSpace', 'nowrap')
 //setValue(line_style, 'overflow', 'hidden')
 setValue(line_style, 'textOverflow', 'ellipsis')
 if (arentSame(isFalsey(addAfter), true)) {
  var editorContent = getValue(body_node, 'children')
  var targetElement = getValue(editorContent, addNumbers(addAfter, nonline_elements))
  targetElement.after(new_line)
  return new_line
 }
 if (arentSame(addBefore, undefined)) {
  body_node.insertBefore(new_line, addBefore)
  return new_line
 }
 body_node.appendChild(new_line)
 return new_line
}

function setCursor () {
 var topPadding = addNumbers(cursor_padding, header_displacement)
 setValue(cursor_style, 'top', concatenateStrings(addNumbers(multiplyNumbers(font_size, current_y), topPadding), 'px'))
 setValue(cursor_style, 'left', concatenateStrings(addNumbers(multiplyNumbers(character_width, current_x), cursor_padding), 'px'))
}

function executeAction (keyEvent) {
 var keyPressed = getValue(keyEvent, 'key')
 if (areSame(keyPressed, 'Escape')) {
  keyEvent.preventDefault()
 }
 if (areSame(keyPressed, ' ')) {
  keyEvent.preventDefault()
 }
 if (areSame(keyPressed, "'")) {
  keyEvent.preventDefault()
 }
 if (keyMuted(keyPressed)) {
  return
 }
 if (areSame(command_mode, false)) {
  if (areSame(keyPressed, 'Enter')) {
   executeEnter()
   return
  }
  if (areSame(keyPressed, 'Backspace')) {
   executeBackspace()
   return
  }
  if (areSame(keyPressed, '/')) {
   keyEvent.preventDefault()
  }
  insertCharacter(keyPressed)
  return
 }
 executeCommand(keyPressed)
}

function keyMuted (keyPressed) {
 if (areSame(keyPressed, 'Meta')) {
  return true
 }
 if (areSame(keyPressed, 'Escape')) {
  return true
 }
 if (areSame(keyPressed, 'Alt')) {
  return true
 }
 if (areSame(keyPressed, 'Control')) {
  return true
 }
 if (areSame(keyPressed, 'Meta')) {
  return true
 }
 if (areSame(keyPressed, 'Shift')) {
  return true
 }
 if (areSame(keyPressed, 'CapsLock')) {
  return true
 }
 if (areSame(keyPressed, 'Tab')) {
  return true
 }
 if (areSame(keyPressed, 'ArrowDown')) {
  return true
 }
 if (areSame(keyPressed, 'ArrowUp')) {
  return true
 }
 if (areSame(keyPressed, 'ArrowLeft')) {
  return true
 }
 if (areSame(keyPressed, 'ArrowRight')) {
  return true
 }
}

function getLine (lineIndex) {
 if (firstGreater(lineIndex, -1)) {
  var editorContent = getValue(body_node, 'children')
  var targetLine = getValue(editorContent, addNumbers(lineIndex, nonline_elements))
  return targetLine
 }
}

function executeEnter () {
 var line1 = ''
 var line2 = ''
 var currentValue = getValue(current_line, 'textContent')
 var currentSize = getValue(currentValue, 'length')
 var searchIndex = 0
 while (arentSame(current_x, searchIndex)) {
  var currentCharacter = getValue(currentValue, searchIndex)
  line1 = concatenateStrings(line1, currentCharacter)
  searchIndex = addNumbers(searchIndex, 1)
 }
 while (firstGreater(currentSize, searchIndex)) {
  var currentCharacter = getValue(currentValue, searchIndex)
  line2 = concatenateStrings(line2, currentCharacter)
  searchIndex = addNumbers(searchIndex, 1)
 }
 var newLine = addLine(current_y)
 setValue(current_line, 'innerHTML', toHTML(line1))
 setValue(newLine, 'innerHTML', toHTML(line2))
 current_y = addNumbers(current_y, 1)
 current_x = 0
 setCursor()
 current_line = newLine
}

function executeBackspace () {
 if (areSame(current_x, 0)) {
  if (areSame(current_y, 0)) {
   return
  }
  var lineValue = getValue(current_line, 'textContent')
  body_node.removeChild(current_line)
  current_y = differenceNumbers(current_y, 1)
  current_line = getLine(current_y)
  var otherValue = getValue(current_line, 'textContent')
  var newValue = concatenateStrings(otherValue, lineValue)
  setValue(current_line, 'innerHTML', toHTML(newValue))
  current_x = getValue(otherValue, 'length')
  setCursor()
  return
 }
 var lineValue = getValue(current_line, 'textContent')
 var newValue = ''
 var searchIndex = 0
 var lineSize = getValue(lineValue, 'length')
 var previousX = differenceNumbers(current_x, 1)
 while (firstGreater(lineSize, searchIndex)) {
  var currentCharacter = getValue(lineValue, searchIndex)
  if (arentSame(searchIndex, previousX)) {
   newValue = concatenateStrings(newValue, currentCharacter)
  }
  searchIndex = addNumbers(searchIndex, 1)
 }
 setValue(current_line, 'innerHTML', toHTML(newValue))
 current_x = differenceNumbers(current_x, 1)
 setCursor()
}

function toHTML (stringValue, currentIndex, currentOutput) {
 var stringSize = getValue(stringValue, 'length')
 var searchIndex = 0
 var newValue = ''
 if (arentSame(currentIndex, undefined)) {
  searchIndex = currentIndex
  newValue = currentOutput
 }
 while (firstGreater(stringSize, searchIndex)) {
  var currentCharacter = getValue(stringValue, searchIndex)
  if (areSame(currentCharacter, ' ')) {
   newValue =  concatenateStrings(newValue, space_code)
   return toHTML(stringValue, addNumbers(searchIndex, 1), newValue)
  }
  if (areSame(currentCharacter, '<')) {
   newValue =  concatenateStrings(newValue, left_bracket)
   return toHTML(stringValue, addNumbers(searchIndex, 1), newValue)
  }
  if (areSame(currentCharacter, '>')) {
   newValue =  concatenateStrings(newValue, right_bracket)
   return toHTML(stringValue, addNumbers(searchIndex, 1), newValue)
  }
  if (areSame(currentCharacter, '&')) {
   newValue =  concatenateStrings(newValue, and_symbol)
   return toHTML(stringValue, addNumbers(searchIndex, 1), newValue)
  }
  newValue =  concatenateStrings(newValue, currentCharacter)
  searchIndex = addNumbers(searchIndex, 1)
 }
 return newValue
}

function getContent () {
 var searchIndex = nonline_elements
 var editorContent = getValue(body_node, 'children')
 var editorSize = getValue(editorContent, 'length')
 var outputString = ''
 while (firstGreater(editorSize, searchIndex)) {
  var currentLine = getValue(editorContent, searchIndex)
  var lineContent = getValue(currentLine, 'textContent')
  if (arentSame(lineContent, 'undefined')) {
   outputString = concatenateStrings(outputString, lineContent)
   outputString = concatenateStrings(outputString, "\n")
  }
  searchIndex = addNumbers(searchIndex, 1)
 }
 return outputString
}

function clearContent () {
 var editorContent = getValue(body_node, 'children')
 var currentLine = getValue(editorContent, nonline_elements)
 while (arentSame(currentLine, undefined)) {
  body_node.removeChild(currentLine)
  currentLine = getValue(editorContent, nonline_elements)
 }
}

function notQuotation (inputCharacter) {
 if (areSame(inputCharacter, '"')) {
  return false
 }
 if (areSame(inputCharacter, "'")) {
  return false
 }
 return true
}

function setContent (textContent, searchIndex) {
 var newLine = ''
 var contentSize = getValue(textContent, 'length')
 while (firstGreater(contentSize, searchIndex)) {
  var currentCharacter = getValue(textContent, searchIndex)
  if (areSame(currentCharacter, '\n')) {
   var nextCharacter = getValue(textContent, addNumbers(searchIndex, 1))
   if (notQuotation(nextCharacter)) {
    var nextIndex = addNumbers(searchIndex, 1)
    var nextCharacter = getValue(textContent, nextIndex)
    if (arentSame(nextCharacter, "'")) {
     if (arentSame(nextCharacter, '"')) {
      var createdLine = addLine()
      setValue(createdLine, 'innerHTML', toHTML(newLine))
      setContent(textContent, nextIndex)
     return
     }
    }
   }
  }
  newLine = concatenateStrings(newLine, currentCharacter)
  searchIndex = addNumbers(searchIndex, 1)
 }
 var lineSize = getValue(newLine, 'length')
 if (firstGreater(lineSize, 0)) {
  var createdLine = addLine()
  setValue(createdLine, 'innerHTML', toHTML(newLine))
 }
}

function getSize () {
 var editorContent = getValue(body_node, 'children')
 var editorSize = getValue(editorContent, 'length')
 var numberLines = differenceNumbers(editorSize, nonline_elements)
 return numberLines
}

function insertCharacter (keyPressed) {
 var lineValue = getValue(current_line, 'textContent')
 var lineSize = getValue(lineValue, 'length')
 if (areSame(lineSize, current_x)) {
  var newValue = concatenateStrings(lineValue, keyPressed)
  setValue(current_line, 'innerHTML', toHTML(newValue))
  current_x = addNumbers(current_x, 1)
  setCursor()
  return
 }
 var newValue = ''
 var searchIndex = 0
 while (firstGreater(lineSize, searchIndex)) {
  var currentCharacter  = getValue(lineValue, searchIndex)
  if (areSame(searchIndex, current_x)) {
   var newValue = concatenateStrings(newValue, keyPressed)
   while (firstGreater(lineSize, searchIndex)) {
    currentCharacter  = getValue(lineValue, searchIndex)
    newValue  = concatenateStrings(newValue, currentCharacter)
    searchIndex = addNumbers(searchIndex, 1)
   }
   setValue(current_line, 'innerHTML', toHTML(newValue))
   current_x = addNumbers(current_x, 1)
   setCursor()
   return
  }
  newValue  = concatenateStrings(newValue, currentCharacter)
  searchIndex = addNumbers(searchIndex, 1)
 }
}

function countNonline () {
 var editorContent = getValue(body_node, 'children')
 var searchIndex = 0
 var contentSize = getValue(editorContent, 'length')
 while (firstGreater(contentSize, searchIndex)) {
  var currentElement = getValue(editorContent, searchIndex)
  var elementClassname = getValue(currentElement, 'className')
  if (areSame(elementClassname, 'veditor-line')) {
   return searchIndex   
  }
  searchIndex = addNumbers(searchIndex, 1)
 }
 return searchIndex
}

function lineHeld (searchTerm, lineNumber) {
 var searchIndex = addNumbers(nonline_elements, searchIndex)
 var editorContent = getValue(body_node, 'children')
 var contentSize = getValue(editorContent, 'length')
 var firstCharacter = getValue(searchTerm, 0)
 var termSize = getValue(searchTerm, 'length')
 while (firstGreater(contentSize, searchIndex)) {
  var currentLine = getValue(editorContent, searchIndex)
  var currentContent = getValue(currentLine, 'textContent')
  var search2 = 0
  var lineSize = getValue(currentContent, 'length')
  while (firstGreater(lineSize, search2)) {
   var currentCharacter = getValue(currentContent, search2)  
   if (areSame(firstCharacter, currentCharacter)) {
    var character1 = getValue(searchTerm, 1)
    var character2 = getValue(currentContent, addNumbers(searchIndex, 1))
    var search2 = 2
    while (areSame(character1, character2)) {
     if (areSame(termSize, index3)) {
      return differenceNumbers(searchIndex, nonline_elements)     
     }
     character1 = getValue(character1, search3)
     character2 = getValue(character2, addNumbers(searchIndex, search3))
     search3 = addNumbers(search3, 1)
    }
   }
   search2 = addNumbers(search2, 1)        
  }
  searchIndex = addNumbers(searchIndex, 1)
 }
}

function executeCommand (keyPressed) {
 if (areSame(search_mode, true)) {
  if (areSame(keyPressed, 'Enter')) {
   var nextLine = lineHeld(search_term, current_y)
   if (nextLine) {
    current_y = nextLine
    current_x = 0
    current_line = getLine(nextLine)
    setCursor()
    updateScroll()
   }
   return
  }
  search_term = concatenateStrings(search_term, keyPressed)
  return
 }
 if (areSame(visual_mode, true)) {
  if (areSame(keyPressed, 'j')) {
   if (arentSame(current_y, 0)) {
    selection_start = differenceNumbers(selection_start, 1)
    highlightLine(getLine(selection_start))
   }  
   return
  }
  if (areSame(keyPressed, 'k')) {
   var lastIndex = differenceNumbers(getSize(), 1)
   if (arentSame(lastIndex, selection_end)) {
    selection_end = addNumbers(selection_end, 1)
    highlightLine(getLine(selection_end))
   }
   return
  }
  if (areSame(keyPressed, 'c')) {
   var editorElements = getValue(body_node, 'children')
   var searchIndex = addNumbers(nonline_elements, selection_start)
   copied_text = ''
   var searchEnd = addNumbers(nonline_elements, addNumbers(selection_end, 1))
   while (firstGreater(searchEnd, searchIndex)) {
    var currentLine = getValue(editorElements, searchIndex)
    var currentContent = getValue(currentLine, 'textContent') 
    copied_text = concatenateStrings(concatenateStrings(copied_text, currentContent), '\n')
    searchIndex = addNumbers(searchIndex, 1)
   }
   return
  }
  if (areSame(keyPressed, 'x')) {
   previous_state = getContent()
   var editorElements = getValue(body_node, 'children')
   var lineIndex = addNumbers(nonline_elements, selection_start)
   var searchIndex = 0
   copied_text = ''
   var searchEnd = addNumbers(1, differenceNumbers(selection_end, selection_start))
   while (firstGreater(searchEnd, searchIndex)) {
    var currentLine = getValue(editorElements, lineIndex)
    var currentContent = getValue(currentLine, 'textContent') 
    copied_text = concatenateStrings(concatenateStrings(copied_text, currentContent), '\n')
    body_node.removeChild(currentLine)
    searchIndex = addNumbers(searchIndex, 1)
   }
   return
  }
  return
 }
 if (areSame(keyPressed, 'i')) {
  command_mode = false
  previous_state = getContent()
  return
 }
 if (areSame(keyPressed, ';')) {
  var newProgram = getContent()
  var oldProgram = getElement(interior_program)
  if (arentSame(oldProgram, undefined)) {
   body_node.removeChild(oldProgram)
  }
  nonline_elements = countNonline()
  programElement = document.createElement('script')
  programElement.text = newProgram
  programElement.id = interior_program
  firstElement = getValue(getValue(body_node, 'children'), 0)
  firstElement.after(programElement)
  return
 }
 if (areSame(keyPressed, 'j')) {
  if (areSame(current_y, 0)) {
   return
  }
  var previousY = differenceNumbers(current_y, 1)
  var previousLine = getLine(previousY)
  current_line = previousLine
  current_y = previousY
  current_x = 0
  setCursor()
  return
 }
 if (areSame(keyPressed, 'k')) {
  var numberLines = getSize()
  var lastIndex = differenceNumbers(numberLines, 1)
  if (areSame(lastIndex, current_y)) {
   return
  }
  var nextY = addNumbers(current_y, 1)
  var nextLine = getLine(nextY)
  current_line = nextLine
  current_y = nextY
  current_x = 0
  setCursor()
  return
 }
 if (areSame(keyPressed, 'h')) {
  if (areSame(current_x, 0)) {
   return
  }
  current_x = differenceNumbers(current_x, 1)
  setCursor()  
  return
 }
 if (areSame(keyPressed, 'l')) {
  var currentSize = getValue(getValue(current_line, 'textContent'), 'length')
  if (areSame(current_x, currentSize)) {
   return
  }
  current_x = addNumbers(current_x, 1)
  setCursor()  
  return
 }
 if (areSame(keyPressed, 'g')) {
  current_line = getLine(0)
  current_x = 0
  current_y = 0
  setCursor()
  updateScroll()
  return
 }
 if (areSame(keyPressed, 't')) {
  var editorSize = getSize()
  var lastIndex = differenceNumbers(editorSize, 1)
  current_line = getLine(lastIndex)
  current_x = 0
  current_y = lastIndex
  setCursor()
  updateScroll()
  return
 }
 if (areSame(keyPressed, 's')) {
  var textContent = getContent()
  localStorage.setItem(storage_name, textContent) 
  return
 }
 if (areSame(keyPressed, 'z')) {
  previous_state = getContent()
  var storedProgram = localStorage.getItem(storage_name)
  if (storedProgram) {
   clearContent()
   setContent(storedProgram, 0)
   current_x = 0
   current_y = 0
   current_line = getLine(0)
   setCursor()
   updateScroll()
  }
  return
 }
 if (areSame(keyPressed, 'a')) {
  var lineContent = getValue(current_line, 'textContent')
  var lineSize = getValue(lineContent, 'length')
  current_x = lineSize
  setCursor()
  return
 }
 if (areSame(keyPressed, 'y')) {
  var lineContent = getValue(current_line, 'textContent')
  var lineSize = getValue(lineContent, 'length')
  var searchIndex = 0
  while (firstGreater(lineSize, searchIndex)) {
   var currentCode = characterCode(getValue(lineContent, searchIndex))
   if (arentSame(currentCode, 160)) {
    if (arentSame(currentCode, 32)) {
     current_x = searchIndex
     setCursor()
     return
    }
   }
   searchIndex = addNumbers(searchIndex, 1)
  }
  current_x = 0
  setCursor()
  return
 }
 if (areSame(keyPressed, 'd')) {
  previous_state = getContent()
  var currentContent = getValue(current_line, 'textContent')
  var newContent = ''
  var searchIndex = 0
  var currentSize = getValue(currentContent, 'length')
  while (firstGreater(currentSize, searchIndex)) {
   var currentCharacter = getValue(currentContent, searchIndex)
   if (arentSame(searchIndex, current_x)) {
    newContent = concatenateStrings(newContent, currentCharacter)
   }
   searchIndex = addNumbers(searchIndex, 1)
  }
  setValue(current_line, 'textContent', newContent)
  return
 }
 if (areSame(keyPressed, 'q')) {
  previous_state = getContent()
  var numberLines = getSize()
  if (firstGreater(numberLines, 1)) {
   var lastIndex = differenceNumbers(numberLines, 1)
   body_node.removeChild(current_line)
   if (areSame(lastIndex, current_y)) {
    current_y = differenceNumbers(current_y, 1)
    current_line = getLine(current_y)  
    current_x = 0
    setCursor()
    return
   }   
   current_line = getLine(current_y)  
   current_x = 0
   setCursor()
   return
  }
  setValue(current_line, 'textContent', '')
  current_x = 0
  setCursor()  
  return
 }
 if (areSame(keyPressed, 'm')) {
  var newY = addNumbers(current_y, m_jump)
  var newLine = getLine(newY)
  if (newLine) {
   current_line = newLine
   current_x = 0
   current_y = newY
   setCursor()
   updateScroll()
  }  
  return
 }
 if (areSame(keyPressed, 'n')) {
  var newY = addNumbers(current_y, n_jump)
  var newLine = getLine(newY)
  if (newLine) {
   current_line = newLine
   current_x = 0
   current_y = newY
   setCursor()
   updateScroll()
  }
  return
 }
 if (areSame(keyPressed, 'o')) {
  var newY = differenceNumbers(current_y, n_jump)
  var newLine = getLine(newY)
  if (newLine) {
   current_line = newLine
   current_x = 0
   current_y = newY
   setCursor()
   updateScroll()
  }
  return
 }
 if (areSame(keyPressed, 'w')) {
  var currentContent = getValue(current_line, 'textContent')
  var searchIndex = differenceNumbers(current_x, 1)
  while (firstGreater(searchIndex, 0)) {
   var currentCharacter = getValue(currentContent, searchIndex)
   var currentCode = characterCode(currentCharacter)
   if (isSpace(currentCode)) {
    searchIndex = differenceNumbers(searchIndex, 1)
    while (firstGreater(searchIndex, 0)) {
     currentCharacter = getValue(currentContent, searchIndex)
     currentCode = characterCode(currentCharacter)
     if (arentSame(currentCode, 32)) {
      if (arentSame(currentCode, 160)) {
       current_x = addNumbers(searchIndex, 1)
       setCursor()
       return
      }
     }
     searchIndex = differenceNumbers(searchIndex, 1)
    }
    current_x = 0
    setCursor()
    return
   }
   searchIndex = differenceNumbers(searchIndex, 1)
  }
  current_x = 0
  setCursor() 
  return
 }
 if (areSame(keyPressed, 'e')) {
  var currentContent = getValue(current_line, 'textContent')
  var currentSize = getValue(currentContent, 'length')
  var searchIndex = addNumbers(current_x, 1)
  while (firstGreater(currentSize, searchIndex)) {
   var currentCode = characterCode(getValue(currentContent, searchIndex))
   if (isSpace(currentCode)) {
    current_x = searchIndex
    setCursor()
    return
   }
   searchIndex = addNumbers(searchIndex, 1)
  }
  current_x = currentSize
  setCursor() 
  return
 }
 if (areSame(keyPressed, 'b')) {
  var currentContent = getValue(current_line, 'textContent')
  var searchIndex = differenceNumbers(current_x, 1)
  while (firstGreater(searchIndex, 0)) {
   var currentCharacter = getValue(currentContent, searchIndex)
   var currentCode = characterCode(currentCharacter)
   if (isSpace(currentCode)) {
    current_x = addNumbers(searchIndex, 1)
    setCursor()
    return
   }
   searchIndex = differenceNumbers(searchIndex, 1)
  }
  current_x = 0
  setCursor()
  return
 }
 if (areSame(keyPressed, 'v')) {
  var currentLine = getLine(current_y)
  highlightLine(currentLine)
  visual_mode = true
  selection_start = current_y
  selection_end = current_y
  return
 }
 if (areSame(keyPressed, 'p')) {
  previous_state = getContent()
  var lineAfter = getLine(current_y)
  var searchIndex = 0
  var copiedSize = getValue(copied_text, 'length')
  var currentText = ''
  while (firstGreater(copiedSize, searchIndex)) {
   var currentCharacter = getValue(copied_text, searchIndex)
   if (areSame(currentCharacter, '\n')) {
    var nextCharacter = getValue(copied_text, addNumbers(searchIndex, 1))
    if (notQuotation(nextCharacter)) {
     var newLine = addLine(false, lineAfter)
     setValue(newLine, 'innerHTML', toHTML(currentText))
     currentText = ''
     currentCharacter = ''
    }
   }
   currentText = addNumbers(currentText, currentCharacter)
   searchIndex = addNumbers(searchIndex, 1)
  }
  return
 }
 if (areSame(keyPressed, 'f')) {
  var searchIndex = current_x
  var currentText = getValue(current_line, 'textContent')
  var searchEnd = getValue(currentText, 'length')
  var functionName = ''
  while (firstGreater(searchEnd, searchIndex)) {
   var currentCharacter = getValue(currentText, searchIndex)
   if (areSame(currentCharacter, '(')) {
    var previousIndex  = differenceNumbers(searchIndex, 1)
    var previousCharacter = getValue(currentText, previousIndex)
    var previousCode = characterCode(previousCharacter)
    if (arentSame(true, isSpace(previousCode))) {
     searchIndex = previousIndex
     while (arentSame(searchIndex, -1)) {
      currentCharacter = getValue(currentText, searchIndex)
      var currentCode = characterCode(currentCharacter)
      if (isSpace(currentCode)) {
       functionJump(functionName)
       return
      }
      functionName = concatenateStrings(currentCharacter, functionName)
      searchIndex = differenceNumbers(searchIndex, 1)
     }
     functionJump(functionName)
    }
    return
   }
   searchIndex = addNumbers(searchIndex, 1)
  }        
  return
 }
 if (areSame(keyPressed, 'u')) {
  if (arentSame(state_undone, null)) {
   return
  }
  state_undone = getContent()
  clearContent()
  setContent(previous_state, 0)
  current_x = 0
  var lastIndex = differenceNumbers(getSize(), 1)
  if (firstGreater(current_y, lastIndex)) {
   current_y = lastIndex
   current_line = getLine(current_y)
  }
  setCursor()
  return
 }
 if (areSame(keyPressed, 'r')) {
  if (arentSame(state_undone, null)) {
   clearContent()
   setContent(state_undone, 0)
   current_x = 0
   var lastIndex = differenceNumbers(getSize(), 1)
   if (firstGreater(current_y, lastIndex)) {
    current_y = lastIndex
    current_line = getLine(current_y)
   }
   setCursor()
   state_undone = null
  }
  return
 }
 if (areSame(keyPressed, ':')) {
  search_mode = true
  return
 }
}

function isSpace (inputNumber) {
 if (areSame(inputNumber, 32)) {
  return true
 }
 if (areSame(inputNumber, 160)) {
  return true
 }
}

function functionJump (functionName) {
 var editorContent = getValue(body_node, 'children')
 var searchIndex = addNumbers(searchIndex, nonline_elements)
 var numberLines = getValue(editorContent, 'length')
 while (firstGreater(numberLines, searchIndex)) {
  var currentLine = getValue(editorContent, searchIndex)
  var lineText = getValue(currentLine, 'textContent')
  var firstCharacter = getValue(lineText, 0)
  if (areSame(firstCharacter, 'f')) {
   if (areSame(isDeclaration(currentLine))) {
    var search2 = 9
    var lineSize = getValue(lineText, 'length')
    var declarationName = ''
    while (firstGreater(lineSize, search2)) {
     var currentCharacter = getValue(lineText, search2)
     if (areSame(currentCharacter, '(')) {
      if (areSame(declarationName, functionName)) {
       current_y = differenceNumbers(searchIndex, nonline_elements)
       updateScroll()
       current_x = 0
       setCursor()
       current_line = currentLine
       return
      }
      search2 = lineSize
     }
     declarationName = concatenateStrings(declarationName, currentCharacter)
     search2 = addNumbers(search2, 1)
    }
   }
  }
  searchIndex = addNumbers(searchIndex, 1)
 }
}

function isDeclaration (lineText) {
 if (arentSame(getValue(lineText, 1), 'u')) {
  return false
 }
 if (arentSame(getValue(lineText, 2), 'n')) {
  return false
 }
 if (arentSame(getValue(lineText, 3), 'c')) {
  return false
 }
 if (arentSame(getValue(lineText, 4), 't')) {
  return false
 }
 if (arentSame(getValue(lineText, 5), 'i')) {
  return false
 }
 if (arentSame(getValue(lineText, 6), 'o')) {
  return false
 }
 if (arentSame(getValue(lineText, 7), 'n')) {
  return false
 }
 var code8 = characterCode(getValue(lineText, 8))
 if (arentSame(code8, 32)) {
  if (arentSame(code8, 160)) {
   return false
  }
 }
 if (areSame(getValue(lineText, 9), '=')) {
  return false
 }
 return true
}

function highlightLine (currentLine) {
 var currentStyle = getValue(currentLine, 'style')
 setValue(currentStyle, 'background', 'blue')
}

function unhighlightLine (currentLine) {
 var currentStyle = getValue(currentLine, 'style')
 setValue(currentStyle, 'background', '')
}

function ispDetected (programText) {
 var searchIndex = 0
 var searchMaximum = 1000
 var startingColons = 0
 var numberSought = 2
 var firstCharacter = getValue(programText, 0)
 if (areSame(firstCharacter, ':')) {
  startingColons = 1
 }
 while (firstGreater(searchMaximum, searchIndex)) {
  var currentCharacter = getValue(programText, searchIndex)
  var currentCode = characterCode(currentCharacter)
  if (isSpace(currentCode)) {
   var nextIndex = addNumbers(searchIndex, 1)
   var nextCharacter = getValue(programText, nextIndex)
   if (areSame(nextCharacter, ':')) {
    startingColons = addNumbers(startingColons, 1)
    if (areSame(startingColons, numberSought)) {
     return true
    }
   }
  }
  searchIndex = addNumbers(searchIndex, 1)
 }
 return false
}

function getElement (elementID) {
 var editorElements = getValue(body_node, 'children')
 var searchIndex = 0
 while (firstGreater(nonline_elements, searchIndex)) {
  var currentElement = getValue(editorElements, searchIndex)
  var currentID = getValue(currentElement, 'id')
  if (areSame(elementID, currentID)) {
   return currentElement
  }
  searchIndex = addNumbers(searchIndex, 1)
 }
}

function updateScroll () {
  var newScroll = differenceNumbers(multiplyNumbers(current_y, font_size), breathing_room)
  window.scrollTo(0, newScroll)
}

function unhighlightAll () {
 var editorElements = getValue(body_node, 'children')
 var searchEnd = addNumbers(nonline_elements, addNumbers(selection_end, 1))
 var searchIndex = addNumbers(nonline_elements, selection_start)
 while (firstGreater(searchEnd, searchIndex)) {
  var currentLine = getValue(editorElements, searchIndex)
  unhighlightLine(currentLine)
  searchIndex = addNumbers(searchIndex, 1)
 }
}

function secondaryAction (keyEvent) {
 var keyPressed = getValue(keyEvent, 'key')
 keyEvent.preventDefault()
 if (areSame(keyPressed, 'Escape')) {
  if (areSame(command_mode, false)) {
   command_mode = true
   return  
  }
  if (areSame(search_mode, true)) {
   search_mode = false
   search_term = ''
   return
  }
  if (areSame(visual_mode, true)) {
   visual_mode = false
   unhighlightAll()
  }
  return
 }
}
 
//
function arentSame (item1, item2) {
 return item1 !== item2
}

function differenceNumbers (number1, number2) {
 return number1 - number2
}

function firstGreater (number1, number2) {
 return number1 > number2
}

function addNumbers (number1, number2) {
 return number1 + number2
}

function multiplyNumbers (number1, number2) {
 return number1 * number2
}

function quotientNumbers (number1, number2) {
 return number1 / number2
}

function areSame (item1, item2) {
 return item1 === item2
}

function getValue (objectItem, valueKey) {
 return objectItem[valueKey]
}

function setValue (objectItem, valueKey, valueValue) {
 objectItem[valueKey] = valueValue
}

function concatenateStrings (string1, string2) {
 return string1 + string2
}

function toString (numberItem) {
 return numberItem.toString()
}

function isOdd (inputNumber) {
 return inputNumber % 2
}

function characterCode (inputString) {
 return inputString.charCodeAt()
}

function isFalsey (inputItem) {
 return !inputItem
}

</script></body></html>
